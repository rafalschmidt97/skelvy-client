<div class="message-container d-flex" [class.mb-3]="isLast">
  <div
    *ngIf="isLast"
    class="image rounded-circle flex-shrink-0"
    [class.image-first-last]="isLast && isFirst"
    [style.background-image]="'url(' + user.profile.photos[0]?.url + ')'"
    (click)="openDetails.emit(user)"
  ></div>
  <div class="flex-fill" [class.message-continuation]="!isLast">
    <div *ngIf="isFirst" class="name">
      {{ user.profile.name }}
    </div>
    <div
      class="message mr-auto"
      [class.photo-with-text]="message.text && message.attachmentUrl"
    >
      <img
        *ngIf="message.attachmentUrl"
        (click)="preview()"
        [src]="message.attachmentUrl"
        class="photo mr-auto"
        alt="photo"
      />
      <div
        *ngIf="message.text"
        (click)="toggleDate()"
        class="text"
        [class.emoji]="isOnlyEmoji"
        [innerText]="message.text"
      ></div>
      <div
        *ngIf="isDateShown"
        class="date"
        [innerHTML]="message.date | date: 'HH:mm'"
      ></div>
    </div>
  </div>
</div>
